## Day 20 : 嵌入式程式動起來

### 事前準備

筆者小時候去圖書館或是書店逛逛的時候，

總是喜歡看那些手作 `DIY` 的相關書籍，

跟著用電線接電池接馬達看到會動起來就覺得很有成就感，

沒有動手過的人不妨現在就來試試看吧，

首先要先準備幾條電線以及一個 `SG90` 伺服機：

![](https://i.imgur.com/asixLk1.jpg)

然後建立一個最基本的伺服機控制電路：

![](https://i.imgur.com/pyJUhsK.png)

### Arduino 程式

完成電路設計階段後就可以來建立控制程式，

以 `SG90` 為例使用脈波控制可以達到更精密的速度控制，

而 `SG90` 通常可以接受的脈波寬度範圍是 `500` ~ `2400` ，

此範例使用 `3` 號接腳輸出脈波訊號，

最後則在主程式內控制脈波寬度進行 `PWM` 控制，

這裡設定 `1400` 是順時針旋轉，逆時針旋轉為 `1580` ，靜止為 `1450` ，

實際數字在不同的伺服機會有些微差異需要多測試幾次，

```cpp=
#include <Servo.h>

Servo servo;

void setup() {
  Serial.begin(9600);
  servo.write(90);
  servo.attach(3, 500, 2400);
}

void loop() {
  servo.writeMicroseconds(1400);
}
```

最後將程式燒錄進去執行結果如動圖：

![](https://i.imgur.com/913XG2N.gif)

各位做完後是不是心中又萌生各種 `Idea` 了呢，

趕緊替寶寶做點什麼實用的功能吧。